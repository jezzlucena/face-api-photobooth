{"version":3,"sources":["components/FaceDetectionSketch.js","components/UploadDialog.js","components/PhotoboothContainer.js","components/AboutDialog.js","components/AppMenu.js","App.js","index.js"],"names":["MODELS_URL","CAPTURE_WIDTH","CAPTURE_HEIGHT","FRAMING_BOX_WIDTH","FRAMING_BOX_HEIGHT","TINY_FACE_OPTIONS","faceapi","inputSize","scoreThreshold","CAPTURE_CONSTRAINTS","video","facingMode","width","ideal","height","frameRate","max","audio","sketch","p","capture","canvas","p5Filter","capturing","detecting","filter","onTakePicture","readyToDetect","faceDrawings","drawCapture","background","image","fill","mapFaceDetectionData","data","resizeCanvas","canvasWidthFactor","windowWidth","canvasHeightFactor","windowHeight","maxFactor","Math","style","windowResized","a","async","setup","createCapture","stream","id","hide","videoEl","document","getElementById","newCaptureWidth","videoWidth","newCaptureHeight","videoHeight","size","createCanvas","myCustomRedrawAccordingToNewPropsHandler","props","THRESHOLD","GRAY","INVERT","OPAQUE","ERODE","mapFilter","draw","translate","scale","framingBoxWidthFactor","length","FRAMING_BOX","_width","_height","_x","_y","stroke","strokeWeight","rect","allFacesWithinBoundaries","reduce","acc","drawing","detection","box","expressions","happy","toDataURL","withFaceExpressions","then","UploadDialog","uploadDialogContent","this","error","color","fontSize","className","Button","variant","onClick","onReset","startIcon","onRetry","imageUrl","value","target","href","CircularProgress","Dialog","open","onClose","React","Component","FILTERS","STAND_BY","DETECT","FINISHED","UPLOAD","PhotoboothContainer","state","currentFilter","mode","fetch","method","headers","body","JSON","stringify","base64Image","imageData","response","json","setState","catch","err","uploadError","ButtonGroup","aria-label","handlePreviousFilter","handleNextFilter","handleUpload","wrapperFinishedClass","includes","FaceDetectionSketch","renderActionButtons","Paper","handleReset","Fab","AboutDialog","maxWidth","fullWidth","marginBottom","marginTop","Grid","container","justify","spacing","textAlign","xs","sm","item","List","ListItem","ListItemText","primary","secondary","AppMenu","menuAnchor","event","currentTarget","aria-controls","aria-haspopup","handleOpenMenu","Menu","anchorEl","keepMounted","transform","Boolean","handleCloseMenu","Tooltip","title","placement","MenuItem","onOpenAbout","App","aboutDialogOpen","ReactDOM","render"],"mappings":"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","file":"static/js/main.56130283.chunk.js","sourcesContent":["import \"p5/lib/addons/p5.dom\"\nimport * as faceapi from 'face-api.js'\n\nconst MODELS_URL = '/models'\n\nlet CAPTURE_WIDTH = 1280\nlet CAPTURE_HEIGHT = 720\n\nlet FRAMING_BOX_WIDTH = 400\nlet FRAMING_BOX_HEIGHT = 400\n\nconst TINY_FACE_OPTIONS = new faceapi.TinyFaceDetectorOptions({\n  inputSize: 256,\n  scoreThreshold: 0.5,\n})\n\nconst CAPTURE_CONSTRAINTS = {\n  video: {\n    facingMode: \"user\",\n    width: { ideal: CAPTURE_WIDTH },\n    height: { ideal: CAPTURE_HEIGHT },\n    frameRate: { ideal: 10, max: 60 }\n  },\n  audio: false\n}\n\nexport default function sketch (p) {\n  let capture, canvas, p5Filter, readyToDetect = null\n  let faceDrawings = []\n\n  let capturing, detecting, filter\n  let onTakePicture\n\n  function drawCapture() {\n    p.background(255)\n    p.image(capture, 0, 0)\n    p.fill(0,0,0,0)\n    if (p5Filter) p.filter(p5Filter)\n  }\n\n  function mapFaceDetectionData(data) {\n    if (detecting) faceDrawings = data\n    readyToDetect = true\n  }\n\n  function resizeCanvas() {\n    if (!canvas) return\n\n    const canvasWidthFactor =  p.windowWidth / CAPTURE_WIDTH\n    const canvasHeightFactor = p.windowHeight / CAPTURE_HEIGHT\n\n    const maxFactor = Math.max(canvasWidthFactor, canvasHeightFactor)\n\n    canvas.style(\"transform\", `scale(${maxFactor})`)\n  }\n\n  function mapFilter() {\n    switch (filter) {\n      case 'THRESHOLD':\n        return p.THRESHOLD\n      case 'GRAY':\n        return p.GRAY\n      case 'INVERT':\n        return p.INVERT\n      case 'OPAQUE':\n        return p.OPAQUE\n      case 'ERODE':\n        return p.ERODE\n      default:\n        return\n    }\n  }\n\n  p.windowResized = async function() {\n    resizeCanvas()\n  }\n\n  p.setup = async function () {\n    await faceapi.loadTinyFaceDetectorModel(MODELS_URL)\n    await faceapi.loadFaceExpressionModel(MODELS_URL)\n\n    capture = p.createCapture(CAPTURE_CONSTRAINTS, stream => {\n      capture.id(\"video_element\")\n      capture.hide()\n\n      const videoEl = document.getElementById('video_element')\n      const newCaptureWidth = videoEl.videoWidth\n      const newCaptureHeight = videoEl.videoHeight\n\n      FRAMING_BOX_HEIGHT = FRAMING_BOX_HEIGHT*newCaptureHeight/CAPTURE_HEIGHT\n      FRAMING_BOX_WIDTH = FRAMING_BOX_HEIGHT\n\n      CAPTURE_WIDTH = newCaptureWidth\n      CAPTURE_HEIGHT = newCaptureHeight\n\n      capture.size(CAPTURE_WIDTH, CAPTURE_HEIGHT)\n\n      canvas = p.createCanvas(CAPTURE_WIDTH, CAPTURE_HEIGHT)\n      canvas.id('canvas_element')\n\n      readyToDetect = true\n      resizeCanvas()\n    })\n  }\n\n  p.myCustomRedrawAccordingToNewPropsHandler = (props) => {\n    if (props.onTakePicture) {\n      onTakePicture = props.onTakePicture\n    }\n\n    capturing = props.capturing\n    detecting = props.detecting\n    filter = props.filter\n    faceDrawings = []\n\n    p5Filter = mapFilter()\n  }\n\n  p.draw = async () => {\n    if (!capture || !canvas || !capturing) return\n\n    p.translate(CAPTURE_WIDTH, 0)\n    p.scale(-1, 1)\n    drawCapture()\n\n    if (!detecting) return\n\n    let framingBoxWidthFactor = 1\n    if (faceDrawings.length > 1) framingBoxWidthFactor = 2\n\n    const FRAMING_BOX = {\n      _width: FRAMING_BOX_WIDTH*framingBoxWidthFactor,\n      _height: FRAMING_BOX_HEIGHT,\n      _x: CAPTURE_WIDTH/2 - (FRAMING_BOX_WIDTH*framingBoxWidthFactor)/2,\n      _y: CAPTURE_HEIGHT/2 - FRAMING_BOX_HEIGHT/2,\n    }\n\n    p.stroke('white')\n    p.strokeWeight(4)\n    p.rect(FRAMING_BOX._x, FRAMING_BOX._y, FRAMING_BOX._width, FRAMING_BOX._height)\n\n    let allFacesWithinBoundaries = faceDrawings.reduce((acc, drawing) => {\n      p.strokeWeight(2)\n      p.rect(drawing.detection.box._x, drawing.detection.box._y, drawing.detection.box._width, drawing.detection.box._height)\n\n      return acc && (drawing.expressions.happy >= 0.9) &&\n        FRAMING_BOX._x < drawing.detection.box._x\n        && FRAMING_BOX._y < drawing.detection.box._y\n        && FRAMING_BOX._x + FRAMING_BOX._width > drawing.detection.box._x + drawing.detection.box._width\n        && FRAMING_BOX._y + FRAMING_BOX._height > drawing.detection.box._y + drawing.detection.box._height\n    }, readyToDetect)\n\n    if (!!faceDrawings.length && allFacesWithinBoundaries && capturing) {\n      faceDrawings = []\n      drawCapture()\n      onTakePicture(document.getElementById('canvas_element').toDataURL())\n      return\n    }\n\n    if (readyToDetect) {\n      readyToDetect = false\n      faceapi\n        .detectAllFaces(capture.id(), TINY_FACE_OPTIONS)\n        .withFaceExpressions()\n        .then((data) => mapFaceDetectionData(data))\n    }\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport QRCode from 'qrcode.react'\nimport './UploadDialog.scss'\n\nimport Dialog from '@material-ui/core/Dialog'\nimport Button from '@material-ui/core/Button'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload'\nimport GetAppIcon from '@material-ui/icons/GetApp'\nimport ErrorIcon from '@material-ui/icons/Error'\nimport ClearIcon from '@material-ui/icons/Clear'\nimport DoneIcon from '@material-ui/icons/Done'\n\nexport default class UploadDialog extends React.Component {\n  render() {\n    let uploadDialogContent\n\n    if (this.props.error) {\n      uploadDialogContent = <div>\n        <ErrorIcon color=\"secondary\" style={{ fontSize: 40 }}/>\n        <h3>Oops...</h3>\n        <div className=\"UploadDialog-text\">\n          There was an error uploading your photo to the cloud.\n        </div>\n        <div>\n          <Button\n            className=\"UploadDialog-button\"\n            variant=\"contained\"\n            color=\"default\"\n            onClick={() => this.props.onReset()}\n            startIcon={<ClearIcon/>}\n          >Cancel</Button>\n          <Button\n            className=\"UploadDialog-button\"\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => this.props.onRetry()}\n            startIcon={<CloudUploadIcon />}\n          >Try Again</Button>\n        </div>\n      </div>\n    } else if (!this.props.imageUrl) {\n      uploadDialogContent = <div>\n        <CircularProgress/>\n        <h3>Uploading...</h3>\n        <div className=\"UploadDialog-text\">\n          Your download link will appear in a few seconds.\n        </div>\n        <Button\n          className=\"UploadDialog-button\"\n          variant=\"contained\"\n          color=\"default\"\n          onClick={() => this.props.onReset()}\n          startIcon={<ClearIcon/>}\n        >Cancel</Button>\n      </div>\n    } else {\n      uploadDialogContent = <div>\n        <QRCode value={this.props.imageUrl}/>\n        <h3>Your photo has been uploaded!</h3>\n        <div className=\"UploadDialog-text\">\n          Point your phone camera at the QR Code above to download it.\n        </div>\n        <div>\n          <Button\n            className=\"UploadDialog-button\"\n            variant=\"contained\"\n            color=\"default\"\n            target=\"_blank\"\n            href={this.props.imageUrl}\n            startIcon={<GetAppIcon/>}\n          >Download</Button>\n          <Button\n            className=\"UploadDialog-button\"\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => this.props.onReset()}\n            startIcon={<DoneIcon/>}\n          >All Done</Button>\n        </div>\n      </div>\n    }\n\n    return (\n      <Dialog\n        open={this.props.open}\n        onClose={() => this.props.onReset()}\n      >\n        <div className=\"UploadDialog-content\">\n          {uploadDialogContent}\n        </div>\n      </Dialog>\n    )\n  }\n}\n\nUploadDialog.propTypes = {\n  open: PropTypes.bool,\n  error: PropTypes.bool,\n  onReset: PropTypes.func,\n  onRetry: PropTypes.func\n}\n","import React from 'react'\nimport FaceDetectionSketch from './FaceDetectionSketch'\nimport UploadDialog from './UploadDialog'\nimport P5Wrapper from 'react-p5-wrapper'\nimport './PhotoboothContainer.scss'\n\nimport Fab from '@material-ui/core/Fab'\nimport Paper from '@material-ui/core/Paper'\nimport Button from '@material-ui/core/Button'\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\nimport CameraIcon from '@material-ui/icons/CameraAlt'\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload'\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore'\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext'\nimport ReplayIcon from '@material-ui/icons/Replay'\nimport CloseIcon from '@material-ui/icons/Close'\n\n\nconst FILTERS = [\n  'NO FILTER',\n  'THRESHOLD',\n  'GRAY',\n  'OPAQUE',\n  'INVERT',\n  'ERODE',\n]\n\nconst STAND_BY = 'STAND_BY'\nconst DETECT = 'DETECTING'\nconst FINISHED = 'FINISHED'\nconst UPLOAD = 'UPLOAD'\n\nexport default class PhotoboothContainer extends React.Component {\n  constructor() {\n    super()\n\n    this.state = {\n      currentFilter: 0,\n      mode: STAND_BY\n    }\n  }\n\n  handleUpload() {\n    fetch('https://face-api-photobooth.herokuapp.com/upload', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        base64Image: this.state.imageData,\n      })\n    })\n    .then(response => response.json())\n    .then(data => this.setState({imageUrl: data.imageUrl}))\n    .catch(err => this.setState({uploadError: true}))\n\n    this.setState({mode: UPLOAD, uploadError: false, imageUrl: null})\n  }\n\n  handlePreviousFilter() {\n    this.setState({\n      currentFilter: (this.state.currentFilter+FILTERS.length-1) % FILTERS.length\n    })\n  }\n\n  handleNextFilter() {\n    this.setState({\n      currentFilter: (this.state.currentFilter+1) % FILTERS.length\n    })\n  }\n\n  handleReset() {\n    this.setState({\n      mode: STAND_BY,\n      currentFilter: 0,\n      uploadError: false,\n      imageUrl: null,\n    })\n  }\n\n  renderActionButtons() {\n    switch (this.state.mode) {\n      case STAND_BY:\n        return <Button\n          className=\"PhotoboothContainer-button\"\n          variant=\"contained\"\n          color=\"primary\"\n          size=\"large\"\n          onClick={() => { this.setState({mode: DETECT}) }}\n          startIcon={<CameraIcon/>}\n        >Take a photo</Button>\n      case DETECT:\n        return <ButtonGroup\n          size=\"large\"\n          variant=\"contained\"\n          aria-label=\"large contained button group\"\n        >\n            <Button\n              color=\"default\"\n              onClick={() => this.handlePreviousFilter()}\n            ><NavigateBeforeIcon/></Button>\n            <Button\n              onClick={() => { this.setState({currentFilter: 0}) }}\n              style={{width: 200}}\n            >{FILTERS[this.state.currentFilter]}</Button>\n            <Button\n              onClick={() => this.handleNextFilter()}\n            ><NavigateNextIcon/></Button>\n        </ButtonGroup>\n      case FINISHED:\n        return <div>\n          <Button\n            className=\"PhotoboothContainer-button\"\n            variant=\"contained\"\n            color=\"default\"\n            size=\"large\"\n            onClick={() => { this.setState({mode: DETECT}) }}\n            startIcon={<ReplayIcon/>}\n          >Retake</Button>\n          <Button\n            className=\"PhotoboothContainer-button\"\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={() => this.handleUpload()}\n            startIcon={<CloudUploadIcon />}\n          >Upload Photo</Button>\n        </div>\n      default:\n        return null\n    }\n  }\n\n  render() {\n    let wrapperFinishedClass = [FINISHED, UPLOAD].includes(this.state.mode) ? 'finished' : ''\n\n    return (\n      <div className=\"PhotoboothContainer\">\n        <div className={`PhotoboothContainer-wrapper ${wrapperFinishedClass}`}>\n          <P5Wrapper\n            sketch={FaceDetectionSketch}\n            capturing={[STAND_BY, DETECT].includes(this.state.mode)}\n            detecting={this.state.mode === DETECT}\n            filter={FILTERS[this.state.currentFilter]}\n            onTakePicture={imageData => { this.setState({imageData, mode: FINISHED}) }}\n          />\n        </div>\n\n        <div className=\"PhotoboothContainer-actions\">\n          {this.renderActionButtons()}\n        </div>\n\n        {this.state.mode === DETECT &&\n          <Paper className=\"PhotoboothContainer-instructions\">\n            Smile within the frame to take a picture\n          </Paper>\n        }\n\n        <UploadDialog\n          open={this.state.mode === UPLOAD}\n          imageUrl={this.state.imageUrl}\n          error={this.state.uploadError}\n          onRetry={() => this.handleUpload()}\n          onReset={() => this.handleReset()}\n        />\n\n        {[FINISHED, DETECT].includes(this.state.mode) &&\n          <Fab\n            className=\"PhotoboothContainer-close\"\n            color=\"secondary\"\n            onClick={() => this.handleReset()}\n          ><CloseIcon/></Fab>\n        }\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport './AboutDialog.scss'\n\nimport Grid from '@material-ui/core/Grid'\nimport Dialog from '@material-ui/core/Dialog'\nimport Paper from '@material-ui/core/Paper'\nimport Button from '@material-ui/core/Button'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport CameraIcon from '@material-ui/icons/CameraAlt'\nimport DoneIcon from '@material-ui/icons/Done'\n\nexport default class AboutDialog extends React.Component {\n  render() {\n    return <Dialog\n      open={this.props.open}\n      maxWidth=\"md\"\n      fullWidth\n      onClose={this.props.onClose}\n    >\n      <div className=\"AboutDialog-content\">\n        <CameraIcon color=\"primary\" style={{ fontSize: 100 }}/>\n        <h1 style={{marginBottom: 40, marginTop: 0}}>Photobooth</h1>\n        <div className=\"AboutDialog-text\">\n          <p>\n            Photobooth is web application that recognizes a person's facial\n            expressions and takes a photo once the user smiles within a\n            bounding box in the captured image.\n          </p>\n          <p>\n            A set of open-source frameworks, tools, and APIs were used to\n            achieve this. Here is a list of some of these solutions:\n          </p>\n          <Grid container justify=\"center\" spacing={2} style={{textAlign: \"center\"}}>\n            <Grid xs={12} sm={6} item>\n              <Paper className=\"AboutDialog-list\">\n                <h3>Front End</h3>\n                <List>\n                  <ListItem>\n                    <ListItemText\n                      primary=\"React\"\n                      secondary=\"Facebook's JavaScript library for building user interfaces\"\n                    />\n                  </ListItem>\n                  <ListItem>\n                    <ListItemText\n                      primary=\"Sass\"\n                      secondary=\"A preprocessor scripting language that is interpreted or compiled into Cascading Style Sheets (CSS).\"\n                    />\n                  </ListItem>\n                  <ListItem>\n                    <ListItemText\n                      primary=\"Material-UI\"\n                      secondary=\"Google's solution that provides React components for faster and easier web development.\"\n                    />\n                  </ListItem>\n                  <ListItem>\n                    <ListItemText\n                      primary=\"p5.js\"\n                      secondary=\"A JS client-side library for creating graphic and interactive experiences based on the core principles of Processing.\"\n                    />\n                  </ListItem>\n                </List>\n              </Paper>\n              <Paper className=\"AboutDialog-list\">\n                <h3>Machine Learning</h3>\n                <List>\n                  <ListItem>\n                    <ListItemText\n                      primary=\"TensorFlow.js\"\n                      secondary=\"A library for machine learning in JavaScript.\"\n                    />\n                  </ListItem>\n                  <ListItem>\n                    <ListItemText\n                      primary=\"face-api.js\"\n                      secondary=\"Face recognition API for the browser built on top of TensorFlow.js.\"\n                    />\n                  </ListItem>\n                </List>\n              </Paper>\n            </Grid>\n            <Grid xs={12} sm={6} item>\n              <Paper className=\"AboutDialog-list\">\n                <h3>Back End</h3>\n                <List>\n                  <ListItem>\n                    <ListItemText\n                      primary=\"Node.js\"\n                      secondary=\"An open-source, cross-platform, server-side JavaScript runtime environment.\"\n                    />\n                  </ListItem>\n                  <ListItem>\n                    <ListItemText\n                      primary=\"Express\"\n                      secondary=\"A web application framework for Node.js designed for building web applications and APIs.\"\n                    />\n                  </ListItem>\n                </List>\n              </Paper>\n              <Paper className=\"AboutDialog-list\">\n                <h3>Services</h3>\n                <List>\n                  <ListItem>\n                    <ListItemText\n                      primary=\"GitHub\"\n                      secondary=\"A global software development version control provider using Git.\"\n                    />\n                  </ListItem>\n                  <ListItem>\n                    <ListItemText\n                      primary=\"AWS / S3\"\n                      secondary=\"A service offered by Amazon Web Services that provides object storage through a web service interface.\"\n                    />\n                  </ListItem>\n                  <ListItem>\n                    <ListItemText\n                      primary=\"Heroku\"\n                      secondary=\"A cloud platform as a service supporting several programming languages.\"\n                    />\n                  </ListItem>\n                </List>\n              </Paper>\n            </Grid>\n          </Grid>\n        </div>\n        <Button\n          className=\"AboutDialog-button\"\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={() => this.props.onClose()}\n          startIcon={<DoneIcon/>}\n        >Done</Button>\n      </div>\n    </Dialog>\n  }\n}\n\nAboutDialog.propTypes = {\n  open: PropTypes.bool,\n  onClose: PropTypes.func\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport './AppMenu.scss'\n\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport Fab from '@material-ui/core/Fab'\nimport Tooltip from '@material-ui/core/Tooltip'\n\nexport default class AppMenu extends React.Component {\n  constructor() {\n    super()\n\n    this.state = {\n      menuAnchor: false,\n    }\n  }\n\n  handleOpenMenu(event) {\n    this.setState({menuAnchor: event.currentTarget})\n  }\n\n  handleCloseMenu() {\n    this.setState({menuAnchor: null})\n  }\n\n  render() {\n    return <div>\n      <Fab\n        className=\"AppMenu-button\"\n        color=\"default\"\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={event => this.handleOpenMenu(event)}\n      ><MenuIcon/></Fab>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={this.state.menuAnchor}\n        keepMounted\n        style={{transform: \"translate(35px, 35px)\"}}\n        open={Boolean(this.state.menuAnchor)}\n        onClose={() => this.handleCloseMenu()}\n      >\n        <Tooltip title=\"Coming Soon\" placement=\"right\">\n          <MenuItem\n            aria-label=\"admin\"\n            style={{color: \"#ccc\"}}\n            onClick={() => this.handleCloseMenu()}\n          >Sign In</MenuItem>\n        </Tooltip>\n        <MenuItem\n          onClick={this.props.onOpenAbout}\n        >About Photobooth</MenuItem>\n      </Menu>\n    </div>\n  }\n}\n\nAppMenu.propTypes = {\n  onOpenAbout: PropTypes.func\n}\n","import React from 'react'\nimport './App.scss'\nimport PhotoboothContainer from './components/PhotoboothContainer'\nimport AboutDialog from './components/AboutDialog'\nimport AppMenu from './components/AppMenu'\n\nexport default class App extends React.Component {\n  constructor() {\n    super()\n\n    this.state = {\n      aboutDialogOpen: false,\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <PhotoboothContainer/>\n        <AppMenu\n          onOpenAbout={() => this.setState({aboutDialogOpen: true})}\n        />\n        <AboutDialog\n          onClose={() => this.setState({aboutDialogOpen: false})}\n          open={this.state.aboutDialogOpen}\n        />\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}